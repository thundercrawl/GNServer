webpackJsonp([17],{563:function(e,t,s){s(590);var r=s(225)(s(584),s(588),"data-v-058b460f",null);e.exports=r.exports},584:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(228),o=s.n(r),i=(s(567),s(231));t.default={data:function(){return{tips:"请填写正确的用户名和密码登录。",ruleForm:{username:"",password:"",accesscode:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],accesscode:[{required:!0,message:"输入随机码",trigger:"blur"}]}}},methods:{getCookie:function(e){for(var t=e+"=",s=document.cookie.split(";"),r=0;r<s.length;r++){for(var o=s[r];" "==o.charAt(0);)o=o.substring(1);if(-1!=o.indexOf(t))return o.substring(t.length,o.length)}return""},loadAccessCode:function(){console.log("cookie：")},accessURL:function(){return console.log(i.a.serviceUrl+this.$global.remote().accessCode),i.a.serviceUrl+this.$global.remote().accessCode},submitForm:function(e){var t=this,s=this,r={userName:s.ruleForm.username,password:s.ruleForm.password,accesscode:s.ruleForm.accesscode};console.log("cookie:"+document.cookie),this.$http.post(this.$global.remote().login,r,function(e){localStorage.Authorization=e.result.Authorization,console.log(e.result),t.getUserInfo()},function(e){s.tips=e.message})},getUserInfo:function(){var e=this,t=this;t.$http.get(this.$global.remote().userInfo,null,function(s){if(t.$tools.isNotEmpty(s.result)){var r=s.result.userInfoDTO,i=s.result.userMenus;t.$cookie.set("userName",r.userName,{expires:"30m"}),e.$global.setUserPermissions(r.permissions),sessionStorage.setItem("userInfo",o()(r)),sessionStorage.setItem("userMenu",o()(i)),e.$store.commit("saveUserInfo",r),e.$store.commit("saveUserMenu",i),e.addUserRouters(i),console.log("user :"+r.userName+" login server"),e.$router.push("/home/index")}},function(e){console.log(e)})},addUserRouters:function(e){},alertMsg:function(e){alert(e)}}}},587:function(e,t,s){t=e.exports=s(226)(!1),t.push([e.i,".login-wrap[data-v-058b460f]{position:relative;width:100%;height:100%}.ms-title[data-v-058b460f]{position:absolute;top:50%;width:100%;margin-top:-230px;text-align:center;font-size:30px;color:#fff}.ms-login[data-v-058b460f]{position:absolute;left:50%;top:50%;width:300px;height:300px;margin:-150px 0 0 -190px;padding:40px;border-radius:5px;background:#fff}.login-btn[data-v-058b460f]{text-align:center}.login-btn button[data-v-058b460f]{width:100%;height:36px}",""])},588:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-wrap"},[s("div",{staticClass:"ms-title"},[e._v("汇众互联融资租赁业务管理系统")]),e._v(" "),s("div",{staticClass:"ms-login"},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"0px"}},[s("div",[s("el-select",{attrs:{label:"角色"}},[s("el-option",{attrs:{label:"管理员",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"操作员",value:"2"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"用户名"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm("ruleForm")}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),s("div",{staticClass:"login-btn"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("登录")])],1),e._v(" "),s("div",[s("table",{attrs:{border:"0",height:"60px"}},[s("tr",[s("el-form-item",{attrs:{prop:"accesscode"}},[s("el-input",{attrs:{type:"text",placeholder:"随机码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm("ruleForm")}},model:{value:e.ruleForm.accesscode,callback:function(t){e.$set(e.ruleForm,"accesscode",t)},expression:"ruleForm.accesscode"}})],1),e._v(" "),s("td",[s("p",{staticStyle:{width:"20px"}})]),e._v(" "),s("td",[s("img",{staticStyle:{height:"40px",width:"100%","vertical-align":"middle"},attrs:{src:e.accessURL(),id:"captcha1",onclick:"refreshCaptcha()"},on:{load:e.loadAccessCode}})])],1)])]),e._v(" "),s("p",{staticStyle:{"font-size":"12px","line-height":"30px",color:"#999"}},[e._v("Tips : "+e._s(e.tips))])],1)],1)])},staticRenderFns:[]}},590:function(e,t,s){var r=s(587);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);s(227)("5a50775d",r,!0)}});
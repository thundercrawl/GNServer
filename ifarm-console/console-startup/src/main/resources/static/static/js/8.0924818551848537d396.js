webpackJsonp([8],{604:function(e,t,o){o(657);var a=o(225)(o(617),o(643),"data-v-60ad0592",null);e.exports=a.exports},617:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{buttons:{query:!1,add:!1,update:!1,delete:!1,distribute:!1},searchFormData:{userInfoDTO:{userName:"",nickName:"",mobileNo:"",active:"Y"}},totalCount:0,userInfoDTOS:[],updateDisable:!0,deleteDisable:!0,disDisable:!0,multipleSelection:[],currentPage:1,pageSize:10,dialogTitle:"",dialogVisible:!1,dialogCommand:"",formLabelWidth:"120px",formColumnDisable:!1,form:{tid:"",userName:"",password:"",nickName:"",email:"",mobileNo:"",empCode:"",deptCode:"",notes:"",active:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],nickName:[{required:!0,message:"请输入用户昵称",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:function(e,t,o){}}],mobileNo:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,o){}}],empCode:[{required:!0,message:"请输入工号",trigger:"blur"}],deptCode:[{required:!0,message:"请输入部门",trigger:"blur"}]},roleDialogVisible:!1,roleStore:[],userRoles:[]}},methods:{onDistributeRole:function(){var e=this;if(this.multipleSelection.length>1)return void this.$message({message:"只能选择其中一条数据进行分配角色",type:"warning"});this.roleStore=this.$global.getRoleStore();var t=this.multipleSelection[0].tid;this.$http.get(this.$global.remote().findRoleByUserId,{userId:t},function(t){var o=t.result,a=[];e.$tools.isNotEmpty(o)&&o.forEach(function(e,t){a.push(e.tid)}),e.userRoles=a},function(t){e.$message.error(t.message)}),this.roleDialogVisible=!0},handleRoleSubmit:function(){var e=this,t=this.multipleSelection[0].tid;this.$http.post(this.$global.remote().distributeRole,{userId:t,ids:this.userRoles},function(t){e.closeRoleDialog()},function(t){e.$message.error(t.message)})},closeRoleDialog:function(){this.roleDialogVisible=!1,this.userRoles=[]},onSearch:function(){var e=this;this.searchFormData.pageNo=this.currentPage,this.searchFormData.pageSize=this.pageSize,this.$http.post(this.$global.remote().userList,this.searchFormData,function(t){e.userInfoDTOS=t.result.userInfoDTOS,e.totalCount=t.result.totalCount},function(t){e.$message.error(t.message)})},onAdd:function(){this.dialogTitle="新增用户",this.dialogVisible=!0,this.dialogCommand="add",this.formColumnDisable=!1},onUpdate:function(){var e=this;if(this.multipleSelection.length>1)return void this.$message({message:"只能选择其中一条数据进行修改",type:"warning"});this.dialogTitle="更新用户",this.dialogCommand="update",this.formColumnDisable=!0;var t=this.multipleSelection[0].tid;this.$http.get(this.$global.remote().userFind,{tid:t},function(t){e.form=t.result,e.dialogVisible=!0},function(t){e.$message.error(t.message)})},handleSubmit:function(){var e=this,t="",o={};o.userInfoDTO=this.form,"add"==this.dialogCommand?t=this.$global.remote().userAdd:"update"==this.dialogCommand&&(t=this.$global.remote().userUpdate),this.$http.post(t,o,function(t){e.closeDialog(),e.onSearch()},function(t){e.$message.error(t.message)})},onDelete:function(){var e=this;this.$confirm("确认删除选中数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.multipleSelection.forEach(function(e){t.push(e.tid)}),e.$http.post(e.$global.remote().userDelete,{ids:t},function(t){e.$message({type:"success",message:"删除成功!"}),e.onSearch()},function(t){e.$message.error(t.message)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleSelectionChange:function(e){this.multipleSelection=e,e.length>0?(this.updateDisable=!1,this.deleteDisable=!1,this.disDisable=!1):(this.updateDisable=!0,this.deleteDisable=!0,this.disDisable=!0)},handleSizeChange:function(e){this.pageSize=e,this.onSearch()},handleCurrentPageChange:function(e){this.currentPage=e,this.onSearch()},rowClick:function(e,t,o){this.$refs.multipleTable.toggleRowSelection(e)},rowDblClick:function(e,t){},closeDialog:function(){this.dialogVisible=!1,this.$refs.form.resetFields(),this.resetForm()},resetForm:function(){this.form={tid:"",userName:"",password:"",nickName:"",email:"",mobileNo:"",empCode:"",deptCode:"",notes:"",active:""}},handleActive:function(e,t,o,a){return this.$global.transformActive(o)}},computed:{activeItems:function(){return this.$global.getTermsValueStore("DATA_STATUE")}},mounted:function(){var e=this.$global.getUserPermissions();this.buttons.query=e.indexOf(this.$global.remote().userList)>=0,this.buttons.add=e.indexOf(this.$global.remote().userAdd)>=0,this.buttons.update=e.indexOf(this.$global.remote().userUpdate)>=0,this.buttons.delete=e.indexOf(this.$global.remote().userDelete)>=0,this.buttons.distribute=e.indexOf(this.$global.remote().distributeRole)>=0}}},624:function(e,t,o){t=e.exports=o(226)(!1),t.push([e.i,".user-management-box[data-v-60ad0592]{width:100%;min-width:1000px}.form-box[data-v-60ad0592]{width:100%}.table-top[data-v-60ad0592]{border-top:1px solid #eee}.pagination[data-v-60ad0592]{text-align:center}tr div[data-v-60ad0592]{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}.el-form input[data-v-60ad0592]{width:190px}.el-form textarea[data-v-60ad0592]{width:475px}",""])},643:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"user-management-box"},[o("div",{staticClass:"form-box"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchFormData,size:"mini"}},[o("el-form-item",{attrs:{label:"用户名"}},[o("el-input",{attrs:{placeholder:"用户名"},model:{value:e.searchFormData.userInfoDTO.userName,callback:function(t){e.$set(e.searchFormData.userInfoDTO,"userName",t)},expression:"searchFormData.userInfoDTO.userName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"用户昵称"}},[o("el-input",{attrs:{placeholder:"用户昵称"},model:{value:e.searchFormData.userInfoDTO.nickName,callback:function(t){e.$set(e.searchFormData.userInfoDTO,"nickName",t)},expression:"searchFormData.userInfoDTO.nickName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"手机号"}},[o("el-input",{attrs:{placeholder:"手机号"},model:{value:e.searchFormData.userInfoDTO.mobileNo,callback:function(t){e.$set(e.searchFormData.userInfoDTO,"mobileNo",t)},expression:"searchFormData.userInfoDTO.mobileNo"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"状态"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchFormData.userInfoDTO.active,callback:function(t){e.$set(e.searchFormData.userInfoDTO,"active",t)},expression:"searchFormData.userInfoDTO.active"}},[o("el-option",{attrs:{label:"--全部--",value:""}}),e._v(" "),e._l(e.activeItems,function(e){return o("el-option",{key:e.valueCode,attrs:{label:e.valueName,value:e.valueCode}})})],2)],1),e._v(" "),o("br"),e._v(" "),o("el-form-item",[o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.buttons.query,expression:"buttons.query"}],attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.buttons.add,expression:"buttons.add"}],attrs:{type:"primary"},on:{click:e.onAdd}},[e._v("新增")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.buttons.update,expression:"buttons.update"}],attrs:{type:"primary",disabled:e.updateDisable},on:{click:e.onUpdate}},[e._v("修改")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.buttons.delete,expression:"buttons.delete"}],attrs:{type:"primary",disabled:e.deleteDisable},on:{click:e.onDelete}},[e._v("删除")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.buttons.distribute,expression:"buttons.distribute"}],attrs:{type:"primary",disabled:e.disDisable},on:{click:e.onDistributeRole}},[e._v("分配角色")])],1)],1)],1),e._v(" "),o("div",{staticClass:"table-top"},[o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.userInfoDTOS,"tooltip-effect":"dark",size:"mini"},on:{"selection-change":e.handleSelectionChange,"row-click":e.rowClick,"row-dblclick":e.rowDblClick}},[o("el-table-column",{attrs:{type:"selection","min-width":"5%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"userName",label:"用户名","min-width":"11%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"nickName",label:"昵称","min-width":"11%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"17%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"mobileNo",label:"手机号","min-width":"11%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"empCode",label:"工号","min-width":"11%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deptCode",label:"部门","min-width":"11%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"notes",label:"备注","min-width":"11%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"active",formatter:e.handleActive,label:"状态","min-width":"11%"}})],1)],1),e._v(" "),o("div",{staticClass:"pagination"},[o("el-pagination",{attrs:{small:"",background:"",layout:"total, sizes, prev, pager, next, jumper","page-size":e.pageSize,"current-page":e.currentPage,total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1),e._v(" "),o("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,center:""},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeDialog}},[o("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules,size:"small",inline:!0}},[o("el-input",{attrs:{type:"hidden","auto-complete":"off"},model:{value:e.form.tid,callback:function(t){e.$set(e.form,"tid",t)},expression:"form.tid"}}),e._v(" "),o("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[o("el-input",{attrs:{"auto-complete":"off",disabled:e.formColumnDisable},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"昵称",prop:"nickName"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{attrs:{"auto-complete":"off",disabled:e.formColumnDisable},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"电话",prop:"mobileNo"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.mobileNo,callback:function(t){e.$set(e.form,"mobileNo",t)},expression:"form.mobileNo"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"工号",prop:"empCode"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.empCode,callback:function(t){e.$set(e.form,"empCode",t)},expression:"form.empCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"部门",prop:"deptCode"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.deptCode,callback:function(t){e.$set(e.form,"deptCode",t)},expression:"form.deptCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"状态"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.active,callback:function(t){e.$set(e.form,"active",t)},expression:"form.active"}},e._l(e.activeItems,function(e){return o("el-option",{key:e.valueCode,attrs:{label:e.valueName,value:e.valueCode}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"备注"}},[o("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:e.form.notes,callback:function(t){e.$set(e.form,"notes",t)},expression:"form.notes"}})],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{staticStyle:{height:"900px"},attrs:{title:"分配角色",visible:e.roleDialogVisible,center:""},on:{"update:visible":function(t){e.roleDialogVisible=t},close:e.closeRoleDialog}},[[o("el-transfer",{attrs:{filterable:"",titles:["未分配角色","已分配角色"],data:e.roleStore},model:{value:e.userRoles,callback:function(t){e.userRoles=t},expression:"userRoles"}})],e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeRoleDialog}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.handleRoleSubmit}},[e._v("确 定")])],1)],2)],1)},staticRenderFns:[]}},657:function(e,t,o){var a=o(624);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o(227)("274afd8b",a,!0)}});